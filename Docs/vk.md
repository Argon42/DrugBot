# Инструкция по настройке окружения

Для запуска бота необходимы переменные окружения:

<b>VK_GROUP_TOKEN</b> - токен группы, которая будет писать сообщения,
чтобы получить токен, необходимо зайти в

1. Настройки группы
2. Работа с API
3. Создать ключ
4. указать права
    - Разрешить приложению доступ к управлению сообществом
    - Разрешить приложению доступ к сообщениям сообщества
    - Разрешить приложению доступ к фотографиям сообщества

<b>VK_APP_ID</b> - id группы, стандартный url группы его содержит
(Пример https://vk.com/club156775409 где 156775409 id),
альтернативный вариант получения id, воспользоваться сторонним сервисом,
например https://regvk.com/id/

<b>DB_CONNECTION_STRING</b> - строка подключения к базе данных.
(Пример: Host=localhost;Port=5555;Database=my_database;Username=user;Password=password) где:
Host - IP базы данных, localhost равняется 127.0.0.1 - локальный адрес машины,
Port - порт подключения,
Database - название базы данных,
Username - имя пользователя для подключения. Указанный ползователь должен иметь полный доступ
к БД (создание, удаление, изменение и т.д.),
Password - пароль для входа в базу данных под именем указанным в Username.

<b>После успешного подключение к базе данных ее нужно обновить для создания необходимых 
для работы таблиц </b>

# Инструкция по настройке группы

1. Необходимо включить Long Poll API в настройках группы -> Работа с API
2. В типах событий включить Входящие сообщения
3. В настройках группы "Сообщения" включить сообщения группе
4. В настройках группы "Сообщения/Настройки для бота" включить
   возможности и "Разрешать добавлять сообщество в чаты"

----

# Конфигурационные параметры

## VK bot

- ### VkBot.ResetErrorCounter.Seconds

параметр отвечающий за временной интервал в котором будет считаться кол-во ошибок

- ### VkBot.ResetErrorCounter.ErrorCount

параметр отвечающий за кол-во ошибок за интервал времени, при достижении лимита бот выключится

# Примеры

app_secrets.json

```json
{
  "VK_GROUP_TOKEN": "vk1.a.RcO6_nUPq85WyA7U4axVZGABWyG6wVD20PRh1SS9",
  "VK_APP_ID": "1567742"
}
```

appsettings.json

```json
{
  "CustomProcessorsPath": "./Processors/",
  "VkBot.ResetErrorCounter.Seconds": 10,
  "VkBot.ResetErrorCounter.ErrorCount": 20,
  "VkBot.NeedForward": false
}
```